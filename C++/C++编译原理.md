# 编译原理

## 编译过程

- 编译预处理

  引入头文件

- 编译，优化(.cpp -> .s)

  词法分析，语法分析，语义分析，符号汇总，汇编代码生成，针对程序结构或CPU平台进行优化。

- 汇编(.s->.o)

  将汇编代码翻译称机器指令

- 链接

  - 静态链接，将程序所需要的全部外部调用函数全部拷贝到最终的可执行程序文件中。 

## 内存模型

### EFL

可执行与可连接格式（Executable and Linkable Format)ELF是一种用于可执行文件，目标代码，共享库，核心转储（core dump）的标准文件格式。

ELF构成如下：

- 只读代码段
  - .text
  - .rodata
  - .data
  - .bss
- 读写数据段
- 不需要映射到存储空间的符号表和调试信息

### 内存管理

操作系统再加载ELF文件时会将按照标准依次读取每个段中的内容，并将其加载到内存中，同时为该进程分配栈空间，并将pc寄存器指向代码段的起始位置。

- .text
- .data
- .bss
- heap
- stack

