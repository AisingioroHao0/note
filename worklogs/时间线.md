# 工作日志

## 2022.07.04-2022.07.05： 环境配置

## 2022.07.06-2022.07.14：邮件系统开发 

## 2022.07.15-2022.07.21：角色信息界面开发

## 2022.07.22-2022.07.30：世界关卡管理策略技术探索

- UE5基于WorldPartation的管理策略

  - 关卡实例
  - OFPA

  - WorldPartation
    - 远距离传送时如何判断目标点的cell已经加载完成
      - 传送测试-黑客帝国城市示例DataLayer
  - DataLayer源码阅读
    - EffectiveState和State的区别
    - 运行时利用DataLayer切换的性能测试
  - 高性能世界关卡组织策略研究与测试

- UE4传统关卡管理策略

  - StreamLevels方案
  - openlevel
  - travel
    - transimision map是否可以写逻辑
## 2022.08.01：3D实时地图模块实现

- 2022.08.01：使用黑客帝国城市示例测试

  配置较低，开发效率低下，决定自行构建测试关卡

  - SetViewTarget并没有完全使用相机组件的视角
    - 在新测试关卡中并未出现此问题，可能需要实现GetCameraComponent方法

- 2022.08.03：构建测试关卡

  将一个虚幻资产的超大landscape从示例level导入主测试level（wp）,使用添加子关卡移动Actor或ctrl+C/V的方式多次崩溃。

  转用levelInstance成功解决。

- 尝试用数学方法，实现相机绕某个点的旋转

  - 偏航改变后，pitch操作bug

    原先的pitch操作固定为XOZ坐标系做旋转，当偏航改变后，平面发生变化，因此需要计算出新的平面。
  
- 2022.08.06：解决pitch和Yaw会从0突变到180的问题，liveMapModule逻辑代码重构

- 2022.08.08：交流沟通，改变方案，等待TA提供优化后的地图模型

- 2022.08.09-2022.08.11：等待TA地图模型参数调整校对

- 2022.08.12：转为正式开发方式

  需求罗列完毕，待验证确认。
  
- 2022.08.15

  工程化代码结构

  访问原世界Actor信息实现
  
- 2022.08.16

  修改代码结构，对于动态生成的Actor改为Module统一控制创建销毁，可否将动态生成的Actor归入DataLayerSubSystem管理存疑。
  
  实现传送。
  
- 2022.08.17

  实现监控模块，可在大地图界面显示监控画面，并可前往观测真实世界并返回。

- 2022.08.18

  实现标记模块，在大地图上标记并在世界上生成

- 2022.08.19

  UE寻路系统：NavMeshVolume包裹整个世界后，在编辑器模式下启动会很慢，交流后搁置单独研究，https://docs.unrealengine.com/5.0/zh-CN/world-partitioned-navigation-mesh/。

  小地图模块实现准备。
  
- 2022.08.22

  小地图实现方案技术选型，资料查找。

- 2022.08.23

  小地图技术探索与初步实现（蓝图）。

- 2022.08.24

  小地图系统化开发（C++），代码结构设计优化整理。

- 2022.08.25

  小地图性能分析与优化·，备选优化方案。

## 2022.08.26-2022.09.01

- UE反射原理
- 资产管理
- SubSystem
- Material逻辑
- DlgSystemPlugin测试与学习

## 2022.09.02：3D地图性能测试

- 2022.09.02

  TA提供方案，创建wc关卡，generate LOD，可生成用于做3D地图的模型资源。

  报错：

  ![image-20220902174801725](时间线.assets/image-20220902174801725.png)

  解决：场景中部分模型开启nanite，与generateLOD算法可能不兼容

- 2022.09.05

  编写MapTestModule。

- 2022.09.06

  某些蓝图存在问题，更新后解决。

  debug打包错误，寻找问题，定位到Vehicle可能存在相关错误，场景中的Motor存在错误，删除后解决。

  UE性能分析工具学习。

- 2022.09.07

  dev包打包错误
  
  consoleVariables Editor 插件开启后和项目sqlLite插件存在不兼容问题
  
- 2022.09.08

  UunrealInsight使用，
  
  官方命令无法打开memoryInsight，原因不明
  
- 2022.09.09

  打包安卓，发现引擎存在不支持的写法
  
- 2022.09.13

  生成高精度lod时

  ![image-20220913115123222](时间线.assets/image-20220913115123222.png)

