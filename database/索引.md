# 索引

## 索引的优点

- 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性
- 加快数据的检索速度
- 加速表和表之间的连接，特别是在实现数据的参考完整性方面
- 通过使用索引，可以在查询过程中，使用优化隐藏器，提高系统性能

## 索引的缺点

- 时间上，创建和维护索引需要耗费时间，随着数据量的增加而增加。

  具体的，数据维护（增加删除修改）索引也需动态维护，降低了数据维护速度

- 空间上，索引需要占物理空间

## 索引的数据结构

- B树索引

- hash索引

- 位图索引

- 前缀索引

  用于索引字符串

## 最左前缀匹配原则

当多列索引时，最多优先

如建立（a，b） ，where b=1无法利用索引

## Hash索引和B+树索引的区别

- hash索引进行等值查询更快，但是却无法进行范围查询
- hash索引不支持使用索引进行排序
- hash不支持模糊查询以及多列索引的最左前缀匹配
- hash索引任何时候都避免不了回表查数据，B+树在符合某些条件（聚簇索引，覆盖索引等）的时候可以只通过索引完成查询
- hash不稳定，性能不可预测

## 添加索引的原则

- 定义由外键的数据列一定要创建索引
- 只有很少数据值的列不应增加索引，如性别（男/女）
- 查询中很少使用或者参考的列不要创建索引

## 聚簇索引

聚簇索引是一种数据存储方式，将数据存储与索引放到一起。

MySQL里只有INNODB表支持聚簇索引

### 特点

- 因为索引和数据存放在一起，所有具有更高的检索效率
- 相比于非聚簇索引，聚簇索引可以减少磁盘IO次数
- 一般而言，会在频繁使用排序的字段上创建聚簇索引

## 非聚簇索引

非聚簇索引中不存储真正的数据行

- 覆盖索引

  索引中包含select数据字段

- 复合索引

  索引中包含多个where条件字段