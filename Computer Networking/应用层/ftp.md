# FTP协议

- 运行在tcp连接之上。
- 使用了两个并行的tcp来传输文件
  - 一个控制连接(port:21)
  - 一个数据连接(port:20)

传输方式

- 文本
- 二进制

## FTP的两种传输模式

### 主动模式

客户端告诉服务端自己开放哪个端口作为数据端口，然后让服务器来连接自己

- 随机打开一个本地大于1024的端口p1
- 客户端通过端口p1向服务器控制端口发起连接请求
- 服务器进行认证成功，请求简历
- 客户端戳本地端口p2进行监听，并向服务器发送"port p1+1"，告诉服务器客户端的数据监听端口
- 服务器接收到端口后，从自己的数据端口(20)发起连接，连接到客户端指定的数据端口

### 被动方式

